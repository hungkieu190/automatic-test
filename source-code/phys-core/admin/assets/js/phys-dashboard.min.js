function physActivatePlugin(){const e=document.querySelector(".phys-form-license");let t=document.querySelector(".wrapper-message");e&&e.addEventListener("submit",(function(s){s.preventDefault();document.querySelectorAll(".phys-license-notice").forEach((function(e){e.remove()}));const n=new FormData(e),i={};for(const[e,t]of n.entries())i[e]=t;const c=e.querySelector('[type="submit"]'),r=c.innerHTML;c.innerHTML="Activating...",c.setAttribute("disabled","disabled"),wp.apiFetch({path:"/phys/v1/license/activate",method:"POST",data:i}).then((e=>{"success"==e.status?(t.innerHTML='<div class="phys-license-notice message-success text-success message">License activated successfully.</div>',setTimeout((function(){let e=new URLSearchParams(window.location.search).get("phys_redirect");e?window.location.href=e:window.location.reload()}),800)):t.innerHTML='<div class="phys-license-notice message-notice message text-error">'+e.message+"</div>"})).catch((e=>{t.innerHTML='<div class="phys-license-notice message-notice message text-error">'+e.message+"</div>"})).finally((()=>{c.removeAttribute("disabled"),c.innerHTML=r}))}))}function physDeactivatePlugin(){const e=document.querySelector(".phys-deactive");e&&e.addEventListener("click",(function(t){t.preventDefault();document.querySelectorAll(".phys-license-notice").forEach((function(e){e.remove()}));const s=e.innerHTML;e.innerHTML="Deactivating...",e.setAttribute("disabled","disabled"),wp.apiFetch({path:"/phys/v1/license/deactivate",method:"POST"}).then((t=>{"success"==t.status?(e.insertAdjacentHTML("afterend",'<div class="phys-license-notice phys-license-notice--success text-success"><p>License deactivated successfully.</p></div>'),setTimeout((function(){window.location.reload()}),800)):e.insertAdjacentHTML("afterend",'<div class="phys-license-notice phys-license-notice--error text-error"><p>'+t.message+"</p></div>")})).catch((t=>{e.insertAdjacentHTML("afterend",'<div class="phys-license-notice phys-license-notice--error text-error"><p>'+t.message+"</p></div>")})).finally((()=>{e.removeAttribute("disabled"),e.innerHTML=s}))}))}function physUpdatePersonal(){const e=document.querySelector(".phys-form-personal");document.querySelector(".arrow-personal-token");e&&e.addEventListener("submit",(function(t){t.preventDefault();document.querySelectorAll(".phys-license-notice").forEach((function(e){e.remove()}));const s=new FormData(e),n={};for(const[e,t]of s.entries())n[e]=t;const i=e.querySelector('[type="submit"]'),c=i.innerHTML;i.innerHTML="Activating...",i.setAttribute("disabled","disabled"),wp.apiFetch({path:"/phys/v1/license/update-personal",method:"POST",data:n}).then((t=>{"success"==t.status?(e.insertAdjacentHTML("afterend",'<div class="phys-license-notice phys-license-notice--success text-success"><p>License activated successfully.</p></div>'),setTimeout((function(){window.location.reload()}),800)):e.insertAdjacentHTML("afterend",'<div class="phys-license-notice phys-license-notice--error text-error"><p>'+t.message+"</p></div>")})).catch((t=>{e.insertAdjacentHTML("afterend",'<div class="phys-license-notice phys-license-notice--error text-error"><p>'+t.message+"</p></div>")})).finally((()=>{i.removeAttribute("disabled"),i.innerHTML=c}))}))}!function(e){e(document).ready((function(){!function(){if(0==e(".tc-importer-wrapper").length)return;e(document).on("change","#phys-select-page-builder",(function(){var t=e(this),s=t.val(),n=t.parents(".tc-importer-wrapper"),i={action:"phys_update_chosen_builder",phys_key:"phys_page_builder_chosen",phys_value:s};""!==s?(n.removeClass("visual_composer"),n.removeClass("site_origin"),n.removeClass("elementor"),n.addClass(s),n.removeClass("overlay").addClass("loading"),e.post(ajaxurl,i,(function(e){n.removeClass("loading")}))):n.addClass("overlay")}))}()})),e(document).on("click",".tc-button-deregister",(function(t){t.preventDefault(),window.confirm(e(this).data("confirm_deregister"))&&(window.location.href=e(this).data("url-deregister"))}))}(jQuery),document.addEventListener("DOMContentLoaded",(function(){physActivatePlugin(),physDeactivatePlugin(),physUpdatePersonal()}));