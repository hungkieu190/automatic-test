!function(e){const t=()=>{e(document.body).on("physcode-metabox-tab",(function(){e("ul.physcode-metabox-tab__title").show(),e("ul.physcode-metabox-tab__title a").on("click",(function(t){t.preventDefault();const a=e(this).closest("div.physcode-metabox-tab");e("ul.physcode-metabox-tab__title li",a).removeClass("active"),e(this).parent().addClass("active"),e("div.physcode-metabox-tab__content--inner",a).hide(),e('div.physcode-metabox-tab__content--inner[data-content="'+e(this).data("content")+'"]',a).show()})),e("div.physcode-metabox-tab").each((function(){e(this).find("ul.physcode-metabox-tab__title li").eq(0).find("a").trigger("click")}))})).trigger("physcode-metabox-tab")},a=()=>{e(".phys-meta-box__file").each(((t,a)=>{let i;const o=e(a).find(".phys-meta-box__file_input"),n=e(a).find(".phys-meta-box__file_list"),l=e(a).find(".btn-upload"),s=!!e(a).data("multil");e(l).on("click",(e=>{e.preventDefault(),i||(i=wp.media({states:[new wp.media.controller.Library({filterable:"all",multiple:s})]}),i.on("select",(function(){const e=i.state().get("selection");let t=o.val();e.forEach((function(e){if((e=e.toJSON()).id)if(s?t=t?t+","+e.id:e.id:(t=e.id,n.empty()),"image"===e.type){const t=e.sizes&&e.sizes.thumbnail?e.sizes.thumbnail.url:e.url;n.append('<li class="phys-meta-box__file_list-item image" data-attachment_id="'+e.id+'"><img src="'+t+'" /><ul class="actions"><li><a href="#" class="delete"></a></li></ul></li>')}else n.append('<li class="phys-meta-box__file_list-item image" data-attachment_id="'+e.id+'"><img class="is_file" src="'+e.icon+'" /><span>'+e.filename+'</span><ul class="actions"><li><a href="#" class="delete"></a></li></ul></li>')})),c(),o.val(t)}))),i.open()})),s&&n.sortable({items:"li.image",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,placeholder:"phys-metabox-sortable-placeholder",start(e,t){t.item.css("background-color","#f6f6f6")},stop(e,t){t.item.removeAttr("style")},update(){let t="";n.find("li.image").css("cursor","default").each((function(){const a=e(this).attr("data-attachment_id");t=t+a+","})),c(),o.val(t)}});const c=()=>{e(n).find("li.image").each(((t,a)=>{e(a).find("a.delete").on("click",(function(){if(e(a).remove(),s){let t="";e(n).find("li.image").css("cursor","default").each((function(){const a=e(this).attr("data-attachment_id");t=t+a+","})),o.val(t)}else o.val("");return!1}))}))};c()}))};e(document).ready((function(){t(),a(),e.fn.select2&&e(".phys-select-2 select").select2(),e(".phys-meta-box__color--input").wpColorPicker(),[...document.querySelectorAll(".physcode-meta-box")].map((e=>{[...e.querySelectorAll(".form-field")].map((t=>{if(t.hasAttribute("data-hide")&&t.dataset.hide){let a=JSON.parse(t.dataset.hide);[...e.querySelectorAll(`input[id^="${a[0]}"]`)].map((e=>{let i=e.getAttribute("type");if(e){switch(i){case"checkbox":"!="==a[1]&&a[2]!==Boolean(e.checked)||"="==a[1]&&a[2]==Boolean(e.checked)?t.style.display="none":t.classList.contains("physcode-meta-box-group")?t.style.display="block":t.style.display="flex";break;case"radio":e.checked&&("!="==a[1]&&a[2]!==e.value||"="==a[1]&&a[2]==e.value?t.style.display="none":t.classList.contains("physcode-meta-box-group")?t.style.display="block":t.style.display="flex");break}e.addEventListener("change",(e=>{let o=e.target;switch(i){case"checkbox":"!="==a[1]&&a[2]!==Boolean(o.checked)||"="==a[1]&&a[2]==Boolean(o.checked)?t.style.display="none":t.classList.contains("physcode-meta-box-group")?t.style.display="block":t.style.display="flex";break;case"select":case"radio":"!="==a[1]&&a[2]!==o.value||"="==a[1]&&a[2]==o.value?t.style.display="none":t.classList.contains("physcode-meta-box-group")?t.style.display="block":t.style.display="flex";break}}))}}))}}))}))}))}(jQuery),jQuery((function(e){"use strict";e("#parent_id");var t={template:["#page_template",".edit-post-post-template__dialog .components-select-control__input"],post_format:['input[name="post_format"]',".editor-post-format .components-radio-control__input"],parent:["#parent_id"]},a={},i=e(document),o=!1;function n(){_.forEach(t,(function(t,i){var o=_.find(t,(function(t){return e(t).length}));a[i]=e(o)}))}var l={template:function(e){var t=o?a.template.val():MBShowHideData.template;return-1!==e.indexOf(t)},post_format:function(e){e=e.map((function(e){return e.toLowerCase()}));var t=MBShowHideData.post_format;return o&&(t=a.post_format.is("select")?a.post_format.val():a.post_format.filter(":checked").val()),t&&0!=t||(t="standard"),-1!=e.indexOf(t)},taxonomy:function(t,a){var i=[];e("#"+t+"checklist :checked").each((function(){var t=e(this),a=e.trim(t.parent().text());i.push(parseInt(t.val())),i.push(a)}));for(var o=0,n=i.length;o<n;o++)if(-1!=a.indexOf(i[o]))return!0;return!1},input_value:function(t,a){for(var i in a=a||"OR",t){var o=e(i),n=e.trim(o.val()),l=null;if(o.is(":checkbox")&&(l=o.is(":checked")===!!t[i]),o.is(":radio")&&(n=e.trim(o.filter(":checked").val())),"OR"==a){if(n==t[i]&&null===l||!0===l)return!0}else if(n!=t[i]&&null===l||!1===l)return!1}return"OR"!=a},is_child:function(){var e=o?a.parent.val():MBShowHideData.parent;return!!parseInt(e)}},s={template:function(e){i.on("change",t.template.join(","),e)},post_format:function(e){i.on("change",t.post_format.join(","),e)},taxonomy:function(t,a){e("#"+t+"checklist-pop").on("click","input",(function(){var t=e(this),a=t.val(),i=t.attr("id");if(a){var o=i.replace("in-popular-","").replace("-"+a,"");e("#in-"+o+"-"+a).trigger("change")}})),e("#"+t+"checklist").on("change","input",a)},input_value:function(t,a){e(a).on("change",t)},is_child:function(e){i.on("change",t.parent.join(","),e)}};function c(t,a,i){var s=function(t){var a,i=e.extend({},t),s=i.hasOwnProperty("relation")?i.relation.toUpperCase():"OR";i.hasOwnProperty("relation")&&delete i.relation;n();for(var c,r,d=["template","post_format","input_value","is_child"],p=0,h=d.length;p<h;p++)if(c=d[p],i.hasOwnProperty(c)){if(r=l[c](i[c],s),"OR"==s){if(a=void 0===a?r:a||r)break}else if(!(a=(void 0===a||a)&&r))break;delete i[c]}if(i.length)for(var f in i)if(i.hasOwnProperty(f))if(r=l.taxonomy(f,i[f]),"OR"==s){if(a=void 0===a?r:a||r)break}else if(!(a=(void 0===a||a)&&r))break;return o=!0,a}(a);"show"==t?s?i.show():i.hide():s?i.hide():i.show()}function r(t,a,i){var o=e.extend({},a);o.hasOwnProperty("relation")&&delete o.relation;for(var n,l=["template","post_format","input_value","is_child"],r=0,d=l.length;r<d;r++)if(n=l[r],o.hasOwnProperty(n))if("input_value"==n){for(var p in o[n])s[n]((function(){c(t,a,i)}),p);delete o[n]}else s[n]((function(){c(t,a,i)})),delete o[n];if(!o.length)for(var h in o)o.hasOwnProperty(h)&&s.taxonomy(h,(function(){c(t,a,i)}))}setTimeout((function(){window.requestAnimationFrame((function(){n(),e(".physcode-meta-box").each((function(){var t=e(this),a=t.closest(".postbox");t.data("show")&&c("show",t.data("show"),a),t.data("hide")&&c("hide",t.data("hide"),a)})),e(".physcode-meta-box").each((function(){var t=e(this),a=t.closest(".postbox");t.data("show")&&r("show",t.data("show"),a),t.data("hide")&&r("hide",t.data("hide"),a)}))}))}),1e3)}));